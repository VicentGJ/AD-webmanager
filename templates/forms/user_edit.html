{% extends "base-modal_es.html" %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
{% from "macros.html" import render_field %}
{% if request.query_string %}
<form method="post" action="?{{ request.query_string }}" class="form">
    {% else %}
    <form method="post" action="?" class="form" autocomplete="off">
        {% endif %}
        {{ form.csrf_token }}
        <ul>
            {{ render_field(form.first_name) }}
            {{ render_field(form.last_name) }}
            {{ render_field(form.user_name) }}
            {{ render_field(form.mail, class="main-mail") }}
            <div class="input-group">
                <input type="button" value="+" id="add-alias-btn" class="button">
                <span>{{ form.alias.label }}</span>
            </div>
            <li id="add-alias">
                <!-- if user didnt set othermails, othermails[0] == '0' is true -->
                {% if othermails[0] != '0'%}
                {% for mail in othermails %}
                <div class="div-identifier input-group">
                    <input class="other-mail" type="email" name="alias_mail" value="{{ mail }}">
                    <input type="button" value="-" class="remove-alias button">
                </div>
                {% endfor %}
                {% endif %}

            </li>
            <div class="autocomplete" id="manager-field-div" data-userlist="{{user_list}}">
                {{ render_field(form.manager, id="manager-field")}}
            </div>
            {{ render_field(form.uac_flags, class="form-control") }}
        </ul>

        {% if parent %}
        <a class="link-button" href="{{ parent }}">Cancel</a>
        {% endif %}
        <input class="right" type="submit" value="{{ action }}" />
    </form>

    <script src="../../static/js/otherMailbox_field.js"></script>
    <script src="../../static/js/managerFieldAutocomplete.js"></script>
    {% endblock %}