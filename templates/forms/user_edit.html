{% extends "base-modal_es.html" %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
{% from "forms/macros.html" import render_field %}
{% if request.query_string %}
<form method="post" action="?{{ request.query_string }}" class="form">
    {% else %}
    <form method="post" action="?" class="form">
        {% endif %}
        {{ form.csrf_token }}
        <ul>
            {{ render_field(form.first_name, class="form-control") }}
            {{ render_field(form.last_name, class="form-control") }}
            {{ render_field(form.user_name, class="form-control") }}
            {{ render_field(form.mail, class="form-control") }}

            <li id="add-alias">
                <label>{{ form.alias.label }}</label>
                {% for mail in othermail %}
                <div class="input-group mb-3 div-identifier">
                    <input class="form-control" type="email" name="alias_mail" value="{{ mail }}" placeholder="new alias">
                    <input type="button" value="-" class="btn btn-danger remove-alias">
                </div>
                {% endfor %}
            </li>
            <input type="button" value="+" id="add-alias-btn">

            {{ render_field(form.uac_flags, class="form-control") }}
        </ul>

        {% if parent %}
        <a class="link-button" href="{{ parent }}">Cancel</a>
        {% endif %}
        <input class="right" type="submit" value="{{ action }}" />
    </form>
    <script>
        $(document).ready(function () {
            $(document).on("click", ".remove-alias", function () {
                $(this).parent('.div-identifier').remove();
            });
            $("#add-alias-btn").click(function () {
                $("#add-alias").append("    \
                <div class=\"div-identifier input-group mb-3 \">    \
                    <input class=\"form-control\" type=\"email\" name=\"alias_mail\" placeholder=\"new alias\">  \
                    <input type=\"button\" value=\"-\" class=\"btn btn-danger remove-alias\">    \
                </div>  \
                    ");
            });
        });

    </script>
    {% endblock %}